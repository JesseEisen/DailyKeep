---
title: C Program FAQ
updated: 2016-08-16  16:21
---

## How to add and remove Warning flags in gcc

This is a RTFM question, but there ara also some great points need to pay attention. First, when we add the `-Wall` flag. That means it **enables all the warnings**. The specify information you can refer the manual.

if you do not want to enable all the warning flags. You can follow below which refered by gcc manual.

> You can request many specific warnings with options beginning with ‘-W’, for example -Wimplicit to request warnings on implicit declarations. Each of these specific warning options also has a negative form beginning ‘-Wno-’ to turn off warnings; for example, -Wno-implicit. This manual lists only one of the two forms, whichever is not the default. 

The reference of this manual online: [Warning Options](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

## What does the __builtin_expect do in C

This is a GNU C builtin function. The function definition is :

```c
long __builtin_expect(long exp, long c)
```

The reutnr value is the value of `exp`, which should be an integral expression.The semantics of the built-in are that it is expected that `exp==c`. For example:

```c
if(__builitin_expect(x,0))
	foo();
```

indicates that we do not expect to call `foo`, since we expect x to be zero. Since you are limited to integral expressions for `exp`.

Notice: if the `exp == c` the optimise will get more improve, else the optimise may down.

There are two marcos in linux kernel code:

```c
#define likely(x)  __builtin_expect(!!(x), 1)
#define unlikely(x) __builtin_expect(!!(x),0)
```

Reference: [GCC Builtins Documentation](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)

